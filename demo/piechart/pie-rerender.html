<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <link rel="stylesheet" href="http://a.tbcdn.cn/p/global/1.0/global-min.css" />
    <title>饼图重绘</title>
    <style type="text/css" media="screen">
     .pi-con{
       width:750px;height:300px;margin:auto;
     }
     .kcharts-label{
       color:#0579C6;
       cursor:pointer;
     }
     #J_Redraw{
      display: block;
      width: 150px;
      height: 40px;
      background: #f60;
      color:#fff;
      text-align: center;
      line-height: 40px;
      margin:10px auto;
      font-size: 16px;
      font-weight: bold;
      font-family: Microsoft Yahei;
     }
    </style>       
  </head>
  <body>
    <div id="J_Pie1" class="pi-con">
    </div>
    <a href="javascript:void(0);" id="J_Redraw" >
        Click To Render!
    </a>
   <script charset="utf-8" src="//g.alicdn.com/kissy/k/5.0.1/seed.js"></script>
<script type="text/javascript">

    require("node,kg/kcharts/5.0.0/piechart/index",function(Node,Pie){
       function pie1(){
         var data = [ {label:"Chrome", data:1 },{ label:"FireFox", data:2 },{ label:"IE", data:3 },{ label:"Opera",data:4 },{ label:"Safari", data:5 }];

         var cfg = {
           series:data,
           color:{
             initial:"#f00"
           },
           renderTo:"#J_Pie1",
           cx:350,cy:150,
           rs:80,
           interval:5,
           anim:{
             easing:'swing',
             duration:800
           }
         }
         var pie = new Pie(cfg);
         
         function redrawPie(){
           // 1. 准备随机的数据
           var series = [ 
                         {label:"Chrome", data:Math.random() },
                         { label:"FireFox", data: Math.random()*2},
                         { label:"IE", data:Math.random()*3},
                         { label:"Opera",data:Math.random()*4 },
                         { label:"Safari", data:Math.random()*5 }];
           // 2. 数据更新
           pie.setConfig({series:series});
           // 3. 重绘
           pie.render();
         };
         
         Node.one("#J_Redraw").on("click",redrawPie);
       }
       pie1();
       
     })
    </script>
  </body>
</html>
